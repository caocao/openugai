<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Index</title>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/mylib.js"></script>
</head>
<body>

<div id="contents_list">
Loading ...
</div>

<script type="text/javascript">
var gURL = "http://openugai.wolfdrawer.net/grid2.cgi";

$(document).ready(function() {
  LoadContents();
});

function LoadContents() {
  var url = gURL + "/contents/list";
  $.ajax({
    type: "GET",
    contentType: "text/plain",
    url: url,
    dataType: 'json',
    success: function(data) {
      var html = "";
      for(var i in data.list) {
        html += _makeContentsItem(data.list[i]);
      }
      $('#contents_list').html(html);
    }
  });
}

function _makeContentsItem(contents) {
  var url = gURL + "/contents/info/" + contents.id;
  var html = '<ul><a href="' + url + '">' + contents.name + '</a>';
  html += '<li>Description: ' + contents.desc + '</li>';  
  html += '<li><a href="' + contents.url + '">' + contents.url + '</a></li>';  
  for(var i in contents.data) {
    html += _makeContentsDataInfo(contents.data[i]);
  }
  html += "</ul>";
  return html;
}

function _makeContentsDataInfo(data) {
  var url = gURL + "/contents/data/" + data.id;
  var html = '<ul>';
  html += '<li>Size: ' + data.size + ' ';  
  html += '<a href="' + url + '">Quick start</a></li>';  
  html += '</ul>';
  return html;
}

</script>

<script type="text/javascript">

</script>

</body>
</html>
